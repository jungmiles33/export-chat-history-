---
name: export-chat-history-universal
description: 通用型聊天记录导出工具，支持导出多种聊天应用的对话历史为Markdown文件。支持选择聊天应用、会话，并可选择是否包含工具调用记录。触发词：/导出聊天记录、/导出对话历史、/export-chat、导出聊天记录、导出对话历史
license: MIT
---

# 通用型聊天记录导出工具

## 触发方式
`/导出聊天记录`、`/导出对话历史`、`/export-chat`、「导出聊天记录」、「导出对话历史」

## 适用范围
任何需要导出聊天记录的用户都可以使用。支持多种聊天应用格式，包括但不限于Claude Code、微信、QQ、Slack、Discord等。

## 核心机制
根据用户选择的聊天应用，读取本地存储的对话历史，让用户选择会话，导出为可读的Markdown文件。

---

## 支持的聊天应用

### 1. Claude Code
- 存储位置：`~/.claude/`
- 文件格式：JSONL（每行一个JSON）
- 支持选择项目和会话

### 2. 微信
- 存储位置：`~/Documents/WeChat Files/`
- 文件格式：数据库文件
- 支持导出聊天记录和媒体文件

### 3. QQ
- 存储位置：`~/Library/Containers/com.tencent.qq/Data/Library/Application Support/QQ/`
- 文件格式：数据库文件
- 支持导出聊天记录和表情

### 4. Slack
- 存储位置：`~/Library/Application Support/Slack/`
- 文件格式：JSON文件
- 支持导出公共频道和私人消息

### 5. Discord
- 存储位置：`~/Library/Application Support/discord/`
- 文件格式：JSON文件
- 支持导出服务器和私人消息

---

## 执行流程

### 第一步：选择聊天应用
显示支持的聊天应用列表：
```
支持的聊天应用：
 #  应用名称           描述
1  Claude Code        导出Claude Code对话历史
2  微信                导出微信聊天记录
3  QQ                  导出QQ聊天记录
4  Slack               导出Slack聊天记录
5  Discord             导出Discord聊天记录

请输入应用编号（如1）：
```

### 第二步：列出所有项目/会话
根据选择的聊天应用，列出相应的项目或会话：
- **Claude Code**：列出项目和会话
- **微信**：列出聊天好友和群聊
- **QQ**：列出聊天好友和群聊
- **Slack**：列出工作区和频道
- **Discord**：列出服务器和频道

### 第三步：选择会话
用户选择要导出的会话后，显示该会话的详细信息：
```
会话信息：
- 聊天对象：张三
- 消息数量：156条
- 时间范围：2025-10-01 ~ 2026-02-24
- 文件大小：1.2MB

是否导出该会话？（y/n）
```

### 第四步：导出设置
让用户选择导出选项：
```
导出设置：
1. 是否包含工具调用记录？（默认不包含）
2. 是否包含媒体文件？（默认不包含）
3. 导出格式：Markdown（默认）/ HTML / TXT
4. 输出目录：默认导出到桌面

请配置导出选项：
```

### 第五步：执行导出
开始导出过程并显示进度：
```
🚀 导出任务已开始...
📄 正在导出消息：1/156
📄 正在导出消息：50/156
📄 正在导出消息：100/156
📄 正在导出消息：156/156
✅ 导出完成！

📁 导出位置：~/Desktop/聊天记录导出/
📄 文件名：20251001-20260224_张三的聊天记录.md
📊 文件大小：895KB
```

---

## 快捷用法
用户可以跳过交互步骤，直接指定参数：

| 用法 | 说明 |
|------|------|
| `/导出聊天记录` | 完整交互流程（选应用 → 选会话 → 导出） |
| `/导出聊天记录 Claude Code` | 直接导出Claude Code的对话历史 |
| `/导出聊天记录 微信` | 直接导出微信的聊天记录 |
| `/导出聊天记录 最近5个` | 导出最近5个会话 |
| `/导出聊天记录 全部` | 导出所有会话 |
| `/导出聊天记录 含工具` | 导出时包含工具调用记录 |

---

## 注意事项
1. **隐私安全**：所有操作都在本地完成，不上传任何数据。导出的文件保存在用户自己的桌面
2. **数据位置**：不同聊天应用的存储位置不同，技能会自动检测
3. **文件格式**：支持导出为Markdown、HTML、TXT格式
4. **工具调用**：默认不导出工具调用记录，用户可以选择包含
5. **大文件处理**：如果会话文件超过1MB，导出可能会较慢
6. **编码**：所有文件使用UTF-8编码，支持中文
7. **去重**：过滤重复的消息，只保留完整内容